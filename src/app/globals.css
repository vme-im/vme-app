@import 'tailwindcss';
@import '../styles/typography.css' layer(base);

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --text-2xs: 0.6875rem;

  --color-kfc-red: #c41200;
  --color-kfc-yellow: #ffc72c;
  --color-kfc-cream: #f4f1ea;
  --color-kfc-black: #121212;

  --shadow-neo: 4px 4px 0px 0px #000000;
  --shadow-neo-sm: 2px 2px 0px 0px #000000;
  --shadow-neo-lg: 6px 6px 0px 0px #000000;
  --shadow-neo-xl: 8px 8px 0px 0px #000000;
  --shadow-neo-red: 4px 4px 0px 0px #c41200;
  --shadow-neo-yellow: 4px 4px 0px 0px #ffc72c;

  --border-width-3: 3px;

  --font-sans: 'PingFang SC', 'Microsoft YaHei', 'Heiti SC', var(--font-inter), sans-serif;
  --font-display: var(--font-mona-sans), 'PingFang SC', 'Microsoft YaHei', sans-serif;
  --font-kfc: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;
  --font-funny: 'Comic Sans MS', 'Bubblegum Sans', 'PingFang SC', 'Microsoft YaHei', cursive;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility bg-kfc-newsprint {
  /* 模拟报纸/牛皮纸的噪点纹理 */
  background-color: var(--page-bg);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  background-repeat: repeat;
}

@utility bg-halftone {
  /* 装饰性的半调网格圆点 (Halftone Dots) */
  background-image: radial-gradient(#c41200 1px, transparent 1px);
  background-size: 10px 10px;
}

@utility text-justify-cn {
  /* 中文两端对齐优化 */
  text-align: justify;
  text-justify: inter-ideograph;
}

@utility scrollbar-hide {
  /* 隐藏滚动条但保持滚动功能 */
  -ms-overflow-style: none;
  /* IE and Edge */
  scrollbar-width: none;
  /* Firefox */

  &::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari and Opera */
  }
}

@utility safe-area-top {
  padding-top: env(safe-area-inset-top, 0px);
}

@utility safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

@utility safe-area-x {
  padding-left: env(safe-area-inset-left, 0px);
  padding-right: env(safe-area-inset-right, 0px);
}

@layer base {
  :root {
    --background: #ffffff;
    --foreground: #171717;
    --page-bg: #f4f1ea;
    /* 牛皮纸底色 */
    --safe-area-top-bg: #c41200;
    --safe-area-bottom-bg: #c41200;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background: #0a0a0a;
      --foreground: #ededed;
    }
  }

  html {
    background: var(--color-kfc-red);
    min-height: 100%;
  }

  body {
    color: #121212;
    background: var(--color-kfc-red);
    font-family:
      -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei', 'Segoe UI', Roboto,
      'Helvetica Neue', Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.75;
    letter-spacing: 0.025em;
    position: relative;
    min-height: 100%;
  }

  main {
    /* 主题内容区：噪点纹理奶白色 */
    background-color: var(--page-bg);
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
    background-repeat: repeat;
  }

  ::selection {
    background-color: #c41200;
    color: #ffc72c;
  }
}

/* 汉堡菜单动画 */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

#mobile-menu:not(.hidden) {
  animation: slideDown 0.3s ease-out;
}
